#! /bin/bash

##      02aa_initial_preparation.bsh        -- 2021-09-29
##
##    test all the large table key relationships.
##

/usr/bin/mariadb    --verbose  comptonTransAnlys  <<END ;




SELECT COUNT(*)  FROM Client_anlys_detail
WHERE 
( Client_anlys_detail_layout_name
, Client_anlys_detail_target_sound_1
, Client_anlys_detail_target_sound_2
, Client_anlys_detail_target_sound_3
, Client_anlys_detail_position
)
NOT  IN
(
SELECT  Client_anlys_detail_layout_name
, Client_anlys_detail_target_sound_1
, Client_anlys_detail_target_sound_2
, Client_anlys_detail_target_sound_3
, Client_anlys_detail_position
FROM Anlys_detail, Client_anlys_detail
WHERE 1
AND  Anlys_detail_layout_name     = Client_anlys_detail_layout_name
AND  Anlys_detail_target_sound_1  = Client_anlys_detail_target_sound_1
AND  Anlys_detail_target_sound_2  = Client_anlys_detail_target_sound_2
AND  Anlys_detail_target_sound_3  = Client_anlys_detail_target_sound_3
AND  Anlys_detail_position        = Client_anlys_detail_position
)
;


SELECT COUNT(*) FROM       Client_eval_detail
WHERE 1
AND Client_eval_detail_auto_increment
NOT IN
( SELECT Client_eval_detail_auto_increment
        FROM Client_anlys_detail
        ,    Client_eval_detail
        WHERE 1
    AND   Client_anlys_detail_teacher_name  = Client_eval_detail_teacher_name
    AND   Client_anlys_detail_client_name  = Client_eval_detail_client_name
    AND   Client_anlys_detail_session_name  = Client_eval_detail_session_name
    AND   Client_anlys_detail_layout_name  = Client_eval_detail_layout_name
    AND   Client_anlys_detail_position     = Client_eval_detail_position
    AND   Client_anlys_detail_target_sound_1 = Client_eval_detail_target_sound_1
    AND   Client_anlys_detail_target_sound_2 = Client_eval_detail_target_sound_2
    AND   Client_anlys_detail_target_sound_3 = Client_eval_detail_target_sound_3
    AND   Client_anlys_detail_error_sound_1 = Client_eval_detail_error_sound_1
    AND   Client_anlys_detail_error_sound_2 = Client_eval_detail_error_sound_2
    AND   Client_anlys_detail_error_sound_3 = Client_eval_detail_error_sound_3
    AND   Client_anlys_detail_error_sound_4 = Client_eval_detail_error_sound_4
) ;

END

exit;

